<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- API Logs Tree View -->
        <record id="view_enhanced_api_log_tree" model="ir.ui.view">
            <field name="name">enhanced.api.log.tree</field>
            <field name="model">enhanced.api.log</field>
            <field name="arch" type="xml">
                <tree string="API Logs" default_order="create_date desc">
                    <field name="create_date"/>
                    <field name="endpoint_name"/>
                    <field name="user_id"/>
                    <field name="ip_address"/>
                    <field name="http_method"/>
                    <field name="response_code"/>
                    <field name="response_time"/>
                    <field name="is_success"/>
                </tree>
            </field>
        </record>

        <!-- API Logs Form View -->
        <record id="view_enhanced_api_log_form" model="ir.ui.view">
            <field name="name">enhanced.api.log.form</field>
            <field name="model">enhanced.api.log</field>
            <field name="arch" type="xml">
                <form string="API Log Entry" create="false" edit="false">
                    <sheet>
                        <group>
                            <group name="request_info">
                                <field name="endpoint_name"/>
                                <field name="user_id"/>
                                <field name="ip_address"/>
                                <field name="http_method"/>
                                <field name="create_date"/>
                            </group>
                            <group name="response_info">
                                <field name="response_code"/>
                                <field name="response_time"/>
                                <field name="is_success"/>
                            </group>
                        </group>
                        <group name="data" string="Request Data" invisible="not request_data">
                            <field name="request_data" widget="text"/>
                        </group>
                        <group name="error" string="Error Details" invisible="not error_message">
                            <field name="error_message" widget="text"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- API Usage Log Tree View -->
        <record id="view_enhanced_api_usage_log_tree" model="ir.ui.view">
            <field name="name">enhanced.api.usage.log.tree</field>
            <field name="model">enhanced.api.usage.log</field>
            <field name="arch" type="xml">
                <tree string="API Usage Statistics" default_order="date desc">
                    <field name="date"/>
                    <field name="endpoint_path"/>
                    <field name="user_id"/>
                    <field name="total_requests"/>
                    <field name="successful_requests"/>
                    <field name="failed_requests"/>
                    <field name="success_rate"/>
                    <field name="avg_response_time"/>
                </tree>
            </field>
        </record>

        <!-- API Logs Action -->
        <record id="action_enhanced_api_log" model="ir.actions.act_window">
            <field name="name">API Request Logs</field>
            <field name="res_model">enhanced.api.log</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <!-- API Usage Statistics Action -->
        <record id="action_enhanced_api_usage_log" model="ir.actions.act_window">
            <field name="name">API Usage Statistics</field>
            <field name="res_model">enhanced.api.usage.log</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
        </record>

        <!-- Menu Items -->
        <menuitem id="menu_enhanced_api_logs" 
                  name="API Logs" 
                  parent="menu_enhanced_api_root" 
                  action="action_enhanced_api_log" 
                  sequence="20"/>
        
        <menuitem id="menu_enhanced_api_usage" 
                  name="Usage Statistics" 
                  parent="menu_enhanced_api_root" 
                  action="action_enhanced_api_usage_log" 
                  sequence="30"/>

    </data>
</odoo>
