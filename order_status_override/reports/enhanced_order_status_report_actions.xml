<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Enhanced Order Status Override Report Definition -->
    <record id="enhanced_order_status_report" model="ir.actions.report">
        <field name="name">Enhanced Order Status Report</field>
        <field name="model">sale.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">order_status_override.enhanced_order_status_report_template_updated</field>
        <field name="report_file">order_status_override.enhanced_order_status_report_template_updated</field>
        <field name="print_report_name">'Enhanced Order Status Report - %s' % (object.name)</field>
        <field name="binding_model_id" ref="sale.model_sale_order"/>
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="base.paperformat_euro"/>
    </record>

    <!-- Menu Item for the Enhanced Report -->
    <record id="action_enhanced_order_status_report" model="ir.actions.report">
        <field name="name">Enhanced Order Status Report</field>
        <field name="model">sale.order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">order_status_override.enhanced_order_status_report_template_updated</field>
        <field name="report_file">order_status_override.enhanced_order_status_report_template_updated</field>
        <field name="print_report_name">'Enhanced Order Status Report - %s' % (object.name)</field>
        <field name="binding_model_id" ref="sale.model_sale_order"/>
        <field name="binding_type">report</field>
    </record>

    <!-- Add to Sales Order view as action button -->
    <record id="sale_order_enhanced_report_button" model="ir.ui.view">
        <field name="name">sale.order.enhanced.report.button</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            <xpath expr="//header" position="inside">
                <button name="%(enhanced_order_status_report)d" string="Enhanced Status Report" type="action" class="btn-secondary" context="{'show_address': 1}" groups="base.group_user"/>
            </xpath>
        </field>
    </record>

    <!-- Enhanced Report with HTML Preview Option -->
    <record id="enhanced_order_status_report_html" model="ir.actions.report">
        <field name="name">Enhanced Order Status Report (HTML)</field>
        <field name="model">sale.order</field>
        <field name="report_type">qweb-html</field>
        <field name="report_name">order_status_override.enhanced_order_status_report_template</field>
        <field name="report_file">order_status_override.enhanced_order_status_report_template</field>
        <field name="print_report_name">'Enhanced Order Status Report (HTML) - %s' % (object.name)</field>
        <field name="binding_model_id" ref="sale.model_sale_order"/>
        <field name="binding_type">report</field>
    </record>
</odoo>
