<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Main Dashboard Action -->
    <record id="action_elite_dashboard" model="ir.actions.client">
        <field name="name">Elite Sales Dashboard</field>
        <field name="tag">elite_dashboard</field>
        <field name="params">{}</field>
    </record>

    <!-- Agent Dashboard Views -->
    <record id="elite_dashboard_view_form" model="ir.ui.view">
        <field name="name">elite.agent.dashboard.form</field>
        <field name="model">elite.agent.dashboard</field>
        <field name="arch" type="xml">
            <form string="Agent Performance">
                <sheet>
                    <group>
                        <field name="agent_id"/>
                        <field name="agent_type_id"/>
                        <field name="is_internal"/>
                    </group>
                    <group>
                        <field name="total_sales"/>
                        <field name="deals_count"/>
                        <field name="in_progress_count"/>
                        <field name="in_progress_value"/>
                        <field name="pending_value"/>
                        <field name="commission_earned"/>
                        <field name="rank"/>
                        <field name="previous_rank"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="elite_dashboard_view_tree" model="ir.ui.view">
        <field name="name">elite.agent.dashboard.tree</field>
        <field name="model">elite.agent.dashboard</field>
        <field name="arch" type="xml">
            <tree string="Agent Performance" 
                  decoration-info="rank &lt; previous_rank" 
                  decoration-warning="rank > previous_rank and previous_rank > 0">
                <field name="rank"/>
                <field name="agent_id"/>
                <field name="is_internal"/>
                <field name="total_sales"/>
                <field name="deals_count"/>
                <field name="in_progress_count"/>
                <field name="in_progress_value"/>
                <field name="pending_value"/>
                <field name="commission_earned"/>
                <field name="previous_rank" invisible="1"/>
            </tree>
        </field>
    </record>

    <record id="elite_dashboard_view_search" model="ir.ui.view">
        <field name="name">elite.agent.dashboard.search</field>
        <field name="model">elite.agent.dashboard</field>
        <field name="arch" type="xml">
            <search string="Search Agents">
                <field name="agent_id"/>
                <filter string="Internal Agents" name="internal_agents" domain="[('is_internal', '=', True)]"/>
                <filter string="External Partners" name="external_agents" domain="[('is_internal', '=', False)]"/>
                <group expand="0" string="Group By">
                    <filter string="Agent Type" name="group_by_type" context="{'group_by': 'agent_type_id'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Agent Type Views -->
    <record id="action_elite_agent_type" model="ir.actions.act_window">
        <field name="name">Agent Types</field>
        <field name="res_model">elite.agent.type</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="elite_agent_type_view_form" model="ir.ui.view">
        <field name="name">elite.agent.type.form</field>
        <field name="model">elite.agent.type</field>
        <field name="arch" type="xml">
            <form string="Agent Type">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="is_internal"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="elite_agent_type_view_tree" model="ir.ui.view">
        <field name="name">elite.agent.type.tree</field>
        <field name="model">elite.agent.type</field>
        <field name="arch" type="xml">
            <tree string="Agent Types">
                <field name="name"/>
                <field name="is_internal"/>
            </tree>
        </field>
    </record>

    <!-- Dashboard Settings Views -->
    <record id="action_elite_dashboard_settings" model="ir.actions.act_window">
        <field name="name">Dashboard Settings</field>
        <field name="res_model">elite.dashboard.settings</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

    <record id="elite_dashboard_settings_view_form" model="ir.ui.view">
        <field name="name">elite.dashboard.settings.form</field>
        <field name="model">elite.dashboard.settings</field>
        <field name="arch" type="xml">
            <form string="Dashboard Settings">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="refresh_interval"/>
                        <field name="show_rank_changes"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Agent Dashboard List Action -->
    <record id="action_elite_agent_dashboard" model="ir.actions.act_window">
        <field name="name">Agents Performance</field>
        <field name="res_model">elite.agent.dashboard</field>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>