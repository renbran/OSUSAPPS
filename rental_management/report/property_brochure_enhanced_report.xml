<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Enhanced Sales Offer Report - Biltmore Sufouh Style -->
    <template id="property_brochure_enhanced_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="web.external_layout">
                    <!-- PAGE 1: Property Overview -->
                    <div class="page" style="font-family: 'Helvetica', 'Arial', sans-serif; font-size: 9.5pt; page-break-after: always;">

                        <!-- Validity Banner -->
                        <div style="background: linear-gradient(135deg, #C5A572 0%, #8B7355 100%); color: white; padding: 6px 15px; text-align: center; border-radius: 4px; margin-bottom: 12px; font-weight: bold; font-size: 8.5pt;">
                            ⏰ This offer is valid for 1 day, subject to availability
                        </div>

                        <!-- Property Header with Image -->
                        <div style="position: relative; margin-bottom: 12px;">
                            <t t-if="doc.image">
                                <img t-att-src="image_data_uri(doc.image)" style="width: 100%; height: 220px; object-fit: cover; border-radius: 6px; box-shadow: 0 3px 6px rgba(0,0,0,0.2);"/>
                                <div style="position: absolute; bottom: 12px; left: 15px; background: rgba(139, 115, 85, 0.95); padding: 10px 20px; border-radius: 4px; border-left: 3px solid #C5A572;">
                                    <h1 style="color: white; margin: 0; font-size: 22pt; font-weight: bold;">
                                        <span t-field="doc.name"/>
                                    </h1>
                                    <p style="color: #f0f0f0; margin: 4px 0 0 0; font-size: 10pt;">
                                        <span t-field="doc.property_seq"/> | <span t-field="doc.type"/>
                                        <t t-if="doc.property_subtype_id"> - <span t-field="doc.property_subtype_id"/></t>
                                    </p>
                                </div>
                            </t>
                            <t t-if="not doc.image">
                                <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); padding: 15px; border-radius: 6px;">
                                    <h1 style="color: white; margin: 0; font-size: 22pt; font-weight: bold;">
                                        <span t-field="doc.name"/>
                                    </h1>
                                    <p style="color: #f0f0f0; margin: 4px 0 0 0; font-size: 10pt;">
                                        <span t-field="doc.property_seq"/> | <span t-field="doc.type"/>
                                        <t t-if="doc.property_subtype_id"> - <span t-field="doc.property_subtype_id"/></t>
                                    </p>
                                </div>
                            </t>
                        </div>

                        <!-- Three Column Layout -->
                        <div style="display: table; width: 100%; margin-top: 10px;">
                            
                            <!-- LEFT COLUMN - 40% -->
                            <div style="display: table-cell; width: 38%; vertical-align: top; padding-right: 10px;">
                                
                                <!-- Property Details -->
                                <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                    <h2 style="margin: 0; font-size: 11pt; font-weight: bold;">Property Details</h2>
                                </div>
                                <div style="background: #f9f9f9; padding: 8px; border-radius: 4px; border-left: 3px solid #C5A572; margin-bottom: 8px; font-size: 8pt;">
                                    <p style="margin: 0 0 3px 0;" t-if="doc.sale_lease"><strong>Type:</strong> <span t-field="doc.sale_lease"/></p>
                                    <p style="margin: 0 0 3px 0;" t-if="doc.price"><strong>Price:</strong> <t t-esc="'{:,.2f}'.format(doc.price)"/> AED</p>
                                    <t t-if="doc.type == 'residential'">
                                        <p style="margin: 0 0 3px 0;" t-if="doc.bed"><strong>Bedrooms:</strong> <span t-field="doc.bed"/></p>
                                        <p style="margin: 0 0 3px 0;" t-if="doc.bathroom"><strong>Bathrooms:</strong> <span t-field="doc.bathroom"/></p>
                                        <p style="margin: 0 0 3px 0;" t-if="doc.unit_type"><strong>Unit Type:</strong> <span t-field="doc.unit_type"/></p>
                                    </t>
                                    <p style="margin: 0 0 3px 0;" t-if="doc.total_floor"><strong>Floor:</strong> <span t-field="doc.total_floor"/></p>
                                    <p style="margin: 0 0 3px 0;" t-if="doc.total_area"><strong>Size:</strong> <t t-esc="'{:,.2f}'.format(doc.total_area)"/> <t t-if="doc.measure_unit"><span t-field="doc.measure_unit"/></t></p>
                                    <p style="margin: 0 0 3px 0;" t-if="doc.facing"><strong>View:</strong> <span t-field="doc.facing"/></p>
                                    <p style="margin: 0;" t-if="doc.dld_fee_amount"><strong>Reg. Fees:</strong> <t t-esc="'{:,.2f}'.format(doc.dld_fee_amount)"/> AED</p>
                                </div>

                                <!-- Location -->
                                <t t-if="doc.street or doc.city_id">
                                    <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                        <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Location</h3>
                                    </div>
                                    <div style="background: #f9f9f9; padding: 8px; border-radius: 4px; font-size: 7.5pt; margin-bottom: 8px; line-height: 1.4;">
                                        <t t-if="doc.street"><span t-field="doc.street"/><br/></t>
                                        <t t-if="doc.city_id"><span t-field="doc.city_id"/></t>
                                        <t t-if="doc.state_id">, <span t-field="doc.state_id"/></t>
                                        <t t-if="doc.region_id"><br/><strong>Region:</strong> <span t-field="doc.region_id"/></t>
                                    </div>
                                </t>

                                <!-- Contact - Changed from Landlord to Developer -->
                                <t t-if="doc.landlord_id or doc.landlord_phone">
                                    <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                        <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Contact</h3>
                                    </div>
                                    <div style="background: #f9f9f9; padding: 8px; border-radius: 4px; font-size: 7.5pt; margin-bottom: 8px;">
                                        <p style="margin: 0 0 3px 0;" t-if="doc.landlord_id"><strong>Developer:</strong> <span t-field="doc.landlord_id"/></p>
                                        <p style="margin: 0 0 3px 0;" t-if="doc.landlord_phone"><strong>Phone:</strong> <span t-field="doc.landlord_phone"/></p>
                                        <p style="margin: 0;" t-if="doc.landlord_email"><strong>Email:</strong> <span t-field="doc.landlord_email"/></p>
                                    </div>
                                </t>

                                <!-- Bank Details -->
                                <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                    <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Bank Details</h3>
                                </div>
                                <div style="background: #f9f9f9; padding: 8px; border-radius: 4px; font-size: 7pt; line-height: 1.5;">
                                    <p style="margin: 0 0 3px 0;"><strong>Beneficiary:</strong> G J R E Real Estate LLC</p>
                                    <p style="margin: 0 0 3px 0;"><strong>Bank:</strong> ABU DHABI COMMERCIAL BANK</p>
                                    <p style="margin: 0 0 3px 0;"><strong>Account:</strong> 12830238920001</p>
                                    <p style="margin: 0 0 3px 0;"><strong>IBAN:</strong> AE370030012830238920001</p>
                                    <p style="margin: 0 0 3px 0;"><strong>Swift:</strong> ADCBAEAA</p>
                                    <p style="margin: 0;"><strong>Currency:</strong> AED</p>
                                </div>
                            </div>

                            <!-- MIDDLE COLUMN - 30% -->
                            <div style="display: table-cell; width: 30%; vertical-align: top; padding: 0 10px; border-left: 1px solid #e0e0e0; border-right: 1px solid #e0e0e0;">
                                
                                <!-- Amenities -->
                                <t t-if="doc.amenities and doc.amenities_ids">
                                    <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                        <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Amenities</h3>
                                    </div>
                                    <div style="display: flex; flex-wrap: wrap; margin-bottom: 8px;">
                                        <t t-foreach="doc.amenities_ids[:8]" t-as="amenity">
                                            <div style="width: 50%; text-align: center; padding: 4px; box-sizing: border-box;">
                                                <t t-if="amenity.image">
                                                    <img t-att-src="image_data_uri(amenity.image)" style="width: 28px; height: 28px; border-radius: 50%; border: 2px solid #C5A572; margin-bottom: 2px;"/>
                                                </t>
                                                <p style="margin: 0; font-size: 6.5pt; color: #333;">
                                                    <span t-field="amenity.title"/>
                                                </p>
                                            </div>
                                        </t>
                                    </div>
                                </t>

                                <!-- Specifications -->
                                <t t-if="doc.is_facilities and doc.property_specification_ids">
                                    <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                        <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Specifications</h3>
                                    </div>
                                    <div style="background: #f9f9f9; padding: 6px; border-radius: 4px; margin-bottom: 8px;">
                                        <t t-foreach="doc.property_specification_ids[:4]" t-as="spec">
                                            <p style="margin: 0 0 4px 0; font-size: 7.5pt; padding-bottom: 4px; border-bottom: 1px dashed #ddd;">
                                                <strong style="color: #8B7355;"><span t-field="spec.title"/>:</strong>
                                                <span t-field="spec.description" style="color: #555;" t-if="spec.description"/>
                                            </p>
                                        </t>
                                    </div>
                                </t>

                                <!-- Nearby Landmarks -->
                                <t t-if="doc.nearby_connectivity and doc.connectivity_ids">
                                    <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                        <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Nearby</h3>
                                    </div>
                                    <div style="font-size: 7.5pt;">
                                        <t t-foreach="doc.connectivity_ids[:6]" t-as="conn">
                                            <p style="margin: 0 0 3px 0;">
                                                <strong style="color: #8B7355;"><span t-field="conn.connectivity_id"/>:</strong>
                                                <span t-field="conn.name"/>
                                                <t t-if="conn.distance"> (<span t-field="conn.distance"/>)</t>
                                            </p>
                                        </t>
                                    </div>
                                </t>
                            </div>

                            <!-- RIGHT COLUMN - 30% -->
                            <div style="display: table-cell; width: 30%; vertical-align: top; padding-left: 10px;">
                                
                                <!-- Gallery -->
                                <t t-if="doc.is_images and doc.property_images_ids">
                                    <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                        <h3 style="margin: 0; font-size: 10pt; font-weight: bold;">Gallery</h3>
                                    </div>
                                    <t t-foreach="doc.property_images_ids[:4]" t-as="img">
                                        <div style="margin-bottom: 6px;" t-if="img.image">
                                            <img t-att-src="image_data_uri(img.image)" style="width: 100%; height: 85px; object-fit: cover; border-radius: 4px; border: 1px solid #ddd;"/>
                                            <p style="margin: 2px 0; font-size: 6.5pt; color: #666; text-align: center;" t-if="img.title">
                                                <span t-field="img.title"/>
                                            </p>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>

                    <!-- PAGE 2: Floor Plans and Payment -->
                    <t t-if="(doc.is_floor_plan and doc.floreplan_ids) or (doc.sale_lease == 'for_sale' and doc.is_payment_plan and doc.custom_payment_plan_line_ids)">
                        <div class="page" style="font-family: 'Helvetica', 'Arial', sans-serif; font-size: 9.5pt;">

                            <div style="background: linear-gradient(135deg, #C5A572 0%, #8B7355 100%); color: white; padding: 6px 15px; text-align: center; border-radius: 4px; margin-bottom: 12px; font-weight: bold; font-size: 8.5pt;">
                                ⏰ This offer is valid for 1 day, subject to availability
                            </div>

                            <div style="text-align: center; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 2px solid #C5A572;">
                                <h1 style="color: #8B7355; margin: 0; font-size: 20pt; font-weight: bold;">
                                    <span t-field="doc.name"/> - Details
                                </h1>
                                <p style="color: #666; margin: 4px 0 0 0; font-size: 9pt;">
                                    <t t-if="doc.is_floor_plan and doc.floreplan_ids">Floor Plans</t>
                                    <t t-if="(doc.is_floor_plan and doc.floreplan_ids) and (doc.sale_lease == 'for_sale' and doc.is_payment_plan and doc.custom_payment_plan_line_ids)"> | </t>
                                    <t t-if="doc.sale_lease == 'for_sale' and doc.is_payment_plan and doc.custom_payment_plan_line_ids">Payment Plan</t>
                                </p>
                            </div>

                            <!-- Two Column Layout -->
                            <div style="display: table; width: 100%;">
                                
                                <!-- LEFT: Floor Plans -->
                                <div style="display: table-cell; width: 48%; vertical-align: top; padding-right: 2%;">
                                    <t t-if="doc.is_floor_plan and doc.floreplan_ids">
                                        <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                            <h2 style="margin: 0; font-size: 11pt; font-weight: bold;">Floor Plans</h2>
                                        </div>
                                        <t t-foreach="doc.floreplan_ids[:1]" t-as="plan">
                                            <div style="margin-bottom: 8px; text-align: center;">
                                                <h3 style="color: #8B7355; font-size: 9pt; margin: 0 0 4px 0;" t-if="plan.title">
                                                    <span t-field="plan.title"/>
                                                </h3>
                                                <t t-if="plan.image">
                                                    <img t-att-src="image_data_uri(plan.image)" style="width: 100%; max-height: 320px; object-fit: contain; border: 2px solid #C5A572; border-radius: 4px; padding: 6px; background: #f9f9f9;"/>
                                                </t>
                                            </div>
                                        </t>
                                        <div style="background: #fff8f0; border-left: 3px solid #C5A572; padding: 6px 8px; margin-bottom: 10px; font-size: 6.5pt; color: #666; font-style: italic; line-height: 1.3;">
                                            All drawings and sizes are approximate. Drawings are not to scale and can be changed without notice. The developer reserves the right to make changes.
                                        </div>
                                    </t>
                                </div>

                                <!-- RIGHT: Payment Details -->
                                <div style="display: table-cell; width: 48%; vertical-align: top; padding-left: 2%;">
                                    <t t-if="doc.sale_lease == 'for_sale' and doc.is_payment_plan and doc.custom_payment_plan_line_ids">
                                        
                                        <!-- Payment Plan -->
                                        <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px;">
                                            <h2 style="margin: 0; font-size: 11pt; font-weight: bold;">Plan of Installments</h2>
                                        </div>
                                        <table style="width: 100%; border-collapse: collapse; font-size: 7.5pt; margin-bottom: 8px;">
                                            <thead>
                                                <tr style="background: #8B7355; color: white;">
                                                    <th style="padding: 4px; text-align: left; border: 1px solid white; font-size: 7.5pt;">Installment</th>
                                                    <th style="padding: 4px; text-align: center; border: 1px solid white; font-size: 7.5pt;">% of Price</th>
                                                    <th style="padding: 4px; text-align: right; border: 1px solid white; font-size: 7.5pt;">Amount AED</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <t t-foreach="doc.custom_payment_plan_line_ids" t-as="line">
                                                    <tr style="background: #f9f9f9; border-bottom: 1px solid #ddd;">
                                                        <td style="padding: 3px; border: 1px solid #ddd; font-size: 7pt;"><span t-field="line.name"/></td>
                                                        <td style="padding: 3px; text-align: center; border: 1px solid #ddd;">
                                                            <strong><t t-esc="'{:.1f}'.format(line.percentage)"/> %</strong>
                                                        </td>
                                                        <td style="padding: 3px; text-align: right; border: 1px solid #ddd;">
                                                            <strong style="color: #8B7355;"><t t-esc="'{:,.2f}'.format(line.amount)"/> AED</strong>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </tbody>
                                        </table>

                                        <!-- Registration Fees -->
                                        <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px; margin-top: 10px;">
                                            <h2 style="margin: 0; font-size: 10pt; font-weight: bold;">Registration Fees*</h2>
                                        </div>
                                        <table style="width: 100%; border-collapse: collapse; font-size: 7.5pt; margin-bottom: 8px;">
                                            <tbody>
                                                <tr style="background: #f9f9f9;" t-if="doc.dld_fee_amount">
                                                    <td style="padding: 4px; border: 1px solid #ddd; font-size: 7pt;">4% DLD Fees + AED 40</td>
                                                    <td style="padding: 4px; text-align: right; border: 1px solid #ddd;">
                                                        <strong><t t-esc="'{:,.2f}'.format(doc.dld_fee_amount)"/> AED</strong>
                                                    </td>
                                                </tr>
                                                <tr style="background: #f9f9f9;">
                                                    <td style="padding: 4px; border: 1px solid #ddd; font-size: 7pt;">Oqood Registration Fee inc. VAT</td>
                                                    <td style="padding: 4px; text-align: right; border: 1px solid #ddd;">
                                                        <strong>AED 2,100.00</strong>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>

                                        <!-- Booking Amount -->
                                        <div style="background: linear-gradient(135deg, #8B7355 0%, #C5A572 100%); color: white; padding: 6px 12px; border-radius: 4px; margin-bottom: 8px; margin-top: 10px;">
                                            <h2 style="margin: 0; font-size: 10pt; font-weight: bold;">Booking Amount</h2>
                                        </div>
                                        <table style="width: 100%; border-collapse: collapse; font-size: 7.5pt; margin-bottom: 10px;">
                                            <tbody>
                                                <tr style="background: #f9f9f9;">
                                                    <td style="padding: 6px; border: 1px solid #ddd; font-weight: bold; font-size: 7.5pt;">Sales Price</td>
                                                    <td style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                                        <strong style="color: #8B7355; font-size: 9pt;"><t t-esc="'{:,.2f}'.format(doc.price)"/> AED</strong>
                                                    </td>
                                                </tr>
                                                <t t-if="doc.custom_payment_plan_line_ids and doc.custom_payment_plan_line_ids[0]">
                                                    <tr style="background: #fff8f0;">
                                                        <td style="padding: 6px; border: 1px solid #ddd; font-weight: bold; font-size: 7.5pt;">Booking Amount</td>
                                                        <td style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                                            <strong style="color: #8B7355; font-size: 9pt;"><t t-esc="'{:,.2f}'.format(doc.custom_payment_plan_line_ids[0].amount)"/> AED</strong>
                                                        </td>
                                                    </tr>
                                                </t>
                                            </tbody>
                                        </table>
                                    </t>
                                </div>
                            </div>

                            <!-- Footer -->
                            <div style="margin-top: 15px; padding-top: 10px; border-top: 2px solid #C5A572;">
                                <t t-if="doc.landlord_phone or doc.landlord_email">
                                    <div style="text-align: center; font-size: 8pt; margin-bottom: 8px;">
                                        <p style="margin: 0 0 3px 0; color: #8B7355; font-weight: bold;">
                                            For inquiries, please contact:
                                            <t t-if="doc.landlord_phone"><span t-field="doc.landlord_phone"/></t>
                                            <t t-if="doc.landlord_email and doc.landlord_phone"> | </t>
                                            <t t-if="doc.landlord_email"><span t-field="doc.landlord_email"/></t>
                                        </p>
                                    </div>
                                </t>
                                <div style="background: #fff8f0; border: 1px solid #C5A572; padding: 6px; border-radius: 4px; font-size: 6.5pt; color: #666; text-align: center; font-style: italic;">
                                    This Sales Offer Is System Generated by G J Properties on <span t-esc="datetime.datetime.now().strftime('%A, %d. %B %Y')"/>
                                    <br/>© <span t-esc="datetime.datetime.now().year"/> - All Rights Reserved
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </t>
        </t>
    </template>

    <!-- Report Action -->
    <record id="property_brochure_enhanced_report_action" model="ir.actions.report">
        <field name="name">Sales Offer</field>
        <field name="model">property.details</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">rental_management.property_brochure_enhanced_template</field>
        <field name="report_file">rental_management.property_brochure_enhanced_template</field>
        <field name="binding_model_id" ref="model_property_details"/>
        <field name="binding_type">report</field>
        <field name="print_report_name">'Sales Offer - %s' % (object.name)</field>
        <field name="paperformat_id" ref="base.paperformat_us"/>
    </record>
</odoo>
