<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- System Parameters -->
        <record id="param_online_appointment_access" model="ir.config_parameter">
            <field name="key">s2u_online_appointment</field>
            <field name="value">public</field>
        </record>
        
        <!-- Email Templates -->
        <record id="appointment_confirmation_template" model="mail.template">
            <field name="name">Appointment Confirmation</field>
            <field name="model_id" ref="model_online_appointment_registration"/>
            <field name="subject">Appointment Confirmed - ${object.name or 'Your Appointment'}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p>Dear ${object.customer_name},</p>
                    <p>Your appointment has been confirmed with the following details:</p>
                    <ul>
                        <li><strong>Date:</strong> ${object.appointment_begin}</li>
                        <li><strong>Duration:</strong> ${object.duration_hours} hours</li>
                        <li><strong>Service:</strong> ${object.appointment_option_id.name or 'General Appointment'}</li>
                    </ul>
                    <p>If you need to cancel or reschedule, please contact us as soon as possible.</p>
                    <p>Thank you!</p>
                    <p>OSUSAPPS Team</p>
                </div>
            </field>
            <field name="email_to">${object.customer_email}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="auto_delete" eval="True"/>
        </record>
        
        <record id="appointment_reminder_template" model="mail.template">
            <field name="name">Appointment Reminder</field>
            <field name="model_id" ref="model_online_appointment_registration"/>
            <field name="subject">Appointment Reminder - Tomorrow at ${object.appointment_begin}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p>Dear ${object.customer_name},</p>
                    <p>This is a friendly reminder that you have an appointment tomorrow:</p>
                    <ul>
                        <li><strong>Date:</strong> ${object.appointment_begin}</li>
                        <li><strong>Duration:</strong> ${object.duration_hours} hours</li>
                        <li><strong>Service:</strong> ${object.appointment_option_id.name or 'General Appointment'}</li>
                    </ul>
                    <p>We look forward to seeing you!</p>
                    <p>OSUSAPPS Team</p>
                </div>
            </field>
            <field name="email_to">${object.customer_email}</field>
            <field name="email_from">${(object.company_id.email or user.email)|safe}</field>
            <field name="auto_delete" eval="True"/>
        </record>
        
        <!-- Cron Job for Appointment Reminders -->
        <record id="cron_appointment_reminders" model="ir.cron">
            <field name="name">Send Appointment Reminders</field>
            <field name="model_id" ref="model_online_appointment_registration"/>
            <field name="state">code</field>
            <field name="code">model.cron_send_reminders()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="numbercall">-1</field>
            <field name="active" eval="True"/>
            <field name="doall" eval="False"/>
        </record>
        
    </data>
</odoo>